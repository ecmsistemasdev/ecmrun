<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4º Desafio 200k Porto Velho-Humaitá</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>

    <!-- <script>
        function sendEmail() {
            // Faz uma requisição POST para enviar o email
            fetch('/send-email2', {
                method: 'POST'
            })
            .then(response => {
                if (response.redirected) {
                    window.location.href = response.url; // Redireciona para a página inicial após o envio
                }
            });
        }
    </script> -->

    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }

        /*.logo-container {
            width: 100%;
            height: 60px;
            background-color: white;
            display: flex;
            justify-content: flex-start; 
            padding-left: 20px; 
            align-items: center;
            margin-bottom: 0px;
        }  */      

        .logo-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-right: 20px;
        }
    
        .login-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
    
        .user-name {
            text-align: right;
            font-weight: bold;
            margin-bottom: 5px;
        }
    
        .login-link {
            text-align: right;
            color: #4376ac;
            text-decoration: none;
            cursor: pointer;
        }
    
        .login-link:hover {
            text-decoration: underline;
        }
        
        
        /*
        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
    
        .modal-button.confirm {
            background-color: #4376ac;
        }
    
        .modal-button.cancel {
            background-color: #6c757d;
        }
        */

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            min-width: 300px;
        }
        
        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 20px;
        }
        
        .modal-button {
            padding: 8px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            color: white;
            font-weight: bold;
        }
        
        .modal-button.confirm {
            background-color: #4376ac;
        }
        
        .modal-button.cancel {
            background-color: #6c757d;
        }
        
            
        .logo {
            width: 60px;
            height: 60px;
        }

        .header {
            width: 50%;
            height: 200px;
            margin: 10px auto 0;
            padding: 0;
            position: relative;
            background-image: url('/static/img/001.jpg');
            background-size: cover;
            background-position: center;
        }

        .center-image {
            width: 200px;
            height: 200px;
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        .main-title {
            text-align: center;
            margin: 20px auto;
            font-size: 24px;
            width: 70%;
        }

        .container {
            width: 70%;
            margin: 20px auto;
            position: relative;
        }

        .main-content {
            text-align: left;
        }

        .event-info {
            margin-bottom: 20px;
            line-height: 1.6;
            font-size: 0.9em;
        }

        .registration-form {
            border: 2px solid #4de228;
            border-radius: 10px;
            padding: 15px;
            width: 320px;
            float: right;
            margin-left: 20px;
            background-color: white;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        .registration-form .title {
            background-color: #4de228;
            color: white;
            padding: 10px;
            margin: -15px -15px 15px -15px;
            border-radius: 7px 7px 0 0;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
        }

        .sublabel {
            color: #4c4c4c;
            font-size: 12px;
            padding-left: 1.5em;
        }


        .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
        }

        .form-group input[type="text"],
        .form-group input[type="email"] {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
        }

        .radio-group {
            text-align: left;
            margin-bottom: 20px;
        }

        .radio-option {
            margin: 5px 0;
            padding: 3px;
        }

        .submit-btn {
            background-color: #1d72cc;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            width: 100%;
            font-weight: bold;
        }

        .submit-btn:hover {
            background-color: #0056b3;
        }

        .text-content {
            text-align: justify;
            margin-top: 20px;
            clear: both;
            padding-top: 10px;
            font-family: Calibri, Arial, sans-serif;
        }

        .regulation-title {
            text-align: center;
            font-size: 24px;
            margin-bottom: 15px;
        }

        .inscription-highlight {
            font-weight: bold;
        }

        .form-title {
            background-color: #647e99;
            color: white;
            padding: 10px;
            margin: -20px -20px 20px -20px;
            border-radius: 5px 5px 0 0;
            font-weight: bold;
            font-size: 18px;
            text-align: center;
        }

        .form-row {
            display: flex;
            padding-top: 5px;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-field {
            flex: 1;
            min-width: 200px;
        }

        .form-field a {
            background-color: yellow;
            padding: 5px;
            font-weight: bold;
        }

        .naoiniciado {
            background-color: yellow;
            padding: 5px;
            align-self: center;
            font-weight: bold;
        }

        .form-field-readonly {
            flex: 1;
            min-width: 200px;
        }

        .form-select {
            /* flex: 1;
            min-width: 0; */ 
            width: 80%;
            padding: 10px;
            margin-top: 10px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
            box-sizing: border-box;
            font-size: 14px;
            height: 40px;

        }

        .termo {
            text-align: justify;
            margin: 0px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            font-size: 14px;
            line-height: 1.5;
        }

        .info {
            text-align: justify;
            margin: 0;
            margin-bottom: 30px;
            padding: 10px;
            background-color: white;
            border-radius: 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .info-title {
            text-align: center;
            margin: 0;
            font-size: 24px;
            width: 90%;
        }

        form {
            width: 100%;
            background: white;
            padding-top: 20px;
            border-radius: 5px;
            min-width: 300px;
            margin-bottom: 20px;
        }

        input[readonly="true"] {
            background-color: #f0f0f0 !important;
        }

        @media (max-width: 768px) {
            form {
                width: calc(100% - 10px);
                margin: 5px 5px 5px 5px;
            }
        }
/**/
        .footer {
            background-color: white;
            padding: 20px 0;
            margin-top: auto;
            text-align: center;
        }

        .footer-logo {
            height: 60px;
            width: auto;
            margin-bottom: 10px;
        }

        .footer-text {
            font-size: 0.7em;
            color: #333;
            margin: 2px 0;
        }
        
        @media (max-width: 1024px) {
            .container, .main-title {
                width: 90%;
            }

            .header {
                width: 100%;
                margin: 0;
            }
        }

        @media (max-width: 768px) {
            .registration-form {
                float: none;
                margin: 0 auto 20px;
                min-width: 300px;
                width: 320px;
            }
            
            .main-content {
                clear: both;
                padding-top: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="logo-container">
        <img src="https://ecmrun.com.br/static/img/ecmrunlogo1.png" alt="Logo" class="logo">
        <div class="login-controls">
            <span id="userNameDisplay" class="user-name"></span>
            <a href="#" id="loginLink" class="login-link">Entrar</a>
        </div>
    </div>
    
    <div id="logoutModal" class="modal">
        <div class="modal-content">
            <p>Deseja sair da sua conta?</p>
            <div class="modal-buttons">
                <button onclick="confirmLogout()" class="modal-button confirm">Sim</button>
                <button onclick="closeLogoutModal()" class="modal-button cancel">Não</button>
            </div>
        </div>
    </div>

    <div class="header">
        <img src="/static/img/img_200k.jpg" alt="Logo" class="center-image">
    </div>
    
    <h1 class="main-title">{{ titulo }}</h1>

    <div class="container">
        
        <form class="registration-form">
            
            <div class="title">Inscrição</div>

            <div class="form-row">
            
                <div class="form-field">
                        
                    <label for="modalidade">Modalidade:</label> 
                    <select name="modalidade" id="modalidade" class="form-select"> <!-- disabled="true"> --> 
                        <option selected disabled value="">Selecione uma modalidade</option>
                        {% for modalidade in modalidades %}
                        <option value="{{ modalidade.id }}">{{ modalidade.descricao }}</option>
                        {% endfor %}
                    </select>
                    <div><a>Valor:</a></div> 
                </div>
            </div>
            
            <button type="button" class="submit-btn">Continuar</button>
            <!-- <button type="button" class="submit-btn" disabled="true">Em Breve</button> --> 
            
        </form>
        
        <div class="main-content">
            <form>
                <div class="info">
                
                    <h3 class="info-title">Informativo</h3> 
                    <br>
                    📅 Data: 04, 05 e 07 de Julho de 2025<br>
                    🏃🏻 Largada às 16hs 🕗<br>
                    📍 Saída: Início do Espaço Alternativo - Av. Jorge Teixeira (Praia)
                    <br><br>
                    💲 Valor da Inscrição:<br> 
                    Solo: {{ vlSolo }}; Dupla: {{ vlDupla }}; Quarteto: {{ vlQuarteto }}; Octeto: {{ vlOcteto }}<br>
                    Valor da inscrição é individual no caso de Modalidade em Equipe<br><br>
                    ✍️ <b>Período de Inscrição:</b><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    Início: {{ inicio_insc }}<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    Término: {{ fim_insc }} ou até o limite das vagas<br><br>
                    💰 <b>Forma de Pagamento:</b><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    Pix e Cartão de Crédito<br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                    <b>Pagamento com Pix tem desconto de 5% sobre o valor da Inscrição</b><br>
                    <br>
                    🏆 Os atletas receberão camiseta, viseira, sacolinha, medalha e um troféu por equipe ou solo.<br>
                    🚙 Os apoio devem fazer a inscrição para receber camisa e medalha do evento. Em breve link para inscrição do apoio
                    <br><br>
                    📱 Mais informações: (69) 99925-9005/ (69) 99308-8323 / (69) 99958-3207
                
                </div>
            </form>

            
            <form id="termoForm">
                <div class="form-title">Regulamento</div>
                <div class="termo">
                    Em 2025 teremos a 4ª edição do Desafio Porto Velho Humaitá. Haverá participação de equipes e solo, não se trata de competição, mas um desafio pessoal, em que cada um será responsável por sua segurança e segurança de todos na coletividade.
                    <br><br>
                    O Desafio é um evento de 200km, denominado evento AUTOSSUFICIENTE, no qual o atleta se responsabiliza por sua orientação de percurso, sua alimentação, hidratação, segurança e tudo que o atleta necessitará durante o trajeto junto com a sua equipe de apoio, com largadas em horários e locais descrito a seguir. 
                    <br><br>
                    O Desafio é uma prova de autossuficiência, com isso, entenderemos, nos solidarizamos e lamentamos todos os problemas que cada um possa ter, mas NÃO HAVERÁ CONCESSÃO nenhuma a essa regra, para garantirmos a segurança de todos.
                    <br><br>
                    1 - <b>MODALIDADES DO DESAFIO</b>
                    <br><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • PROVAS PRINCIPAIS EM 2025 PARA OS 200KM:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        1 - SOLO - 200 km;<br> 
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        2 - DUPLA - 100 km cada atleta;<br> 
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        3 - QUARTETO - 50 km cada atleta;<br> 
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        4 - OCTETO - 25 km cada atleta.<br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        A participação na prova só poderá ser COM CARRO DE APOIO, cada atleta ou equipe será responsável por seu veículo e todos os gastos.
                    <br><br>
                    2 - <b>DIA, HORA, LOCAL, TIPO DE LARGADA</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        A prova largará na seguinte data e horário:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Dia: 04 de Julho de 2025 - Sexta Feira ÀS 16 horas<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Local da Largada e chegada: Av. Jorge Teixeira, início do Espaço Alternativo (Praia)<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Largada preferencialmente todos juntos.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <b>O Atleta da modalidade solo que largar atrasado será automaticamente desclassificado.</b>
                    <br><br>
                    3 - <b>DURAÇÃO, DATA DE TÉRMINO DAS PROVAS</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Duração máxima da prova será de 50 horas, chegada até às 18 horas de domingo de 06/07/2025 no mesmo local da largada.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Dia 06/07/2025 (domingo) 18h (tarde) - Encerramento oficial da prova.
                    <br><br>
                    4 - <b>Nº DE PEITO</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Será fornecido número de peito para todos os atletas.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Os Atletas deverão permanecer com o nº de peito por todo percurso.
                    <br><br>
                    5 - <b>CONGRESSO TÉCNICO</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        O Congresso técnico será em dia e local a ser definido e informado pela organização.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • É OBRIGATÓRIO A PARTICIPAÇÃO DO ATLETA E/OU APOIO NO CONGRESSO TÉCNICO, SENDO A AUSÊNCIA SEM JUSTIFICATIVA MOTIVO DE DESCLASSIFICAÇÃO.
                    <br><br>
                    6 - <B>PONTOS DE COMUNICAÇÃO ENTRE ATLETAS E ORGANIZAÇÃO</B>
                    <br><br>
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Carro de Apoio da organização e pontos de apoios fixos no decorrer do percurso nos kms 25, 50, 75, 100, 125, 150, 175.
                    <br><br>
                    7 - <b>CRITÉRIOS PARA PARTICIPAÇÃO</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Para o atleta poder participar do desafio será necessário:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Ter 18 anos completos no dia da prova;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Está em plenas condições físicas;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Ter realizado a inscrição do desafio;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Estar de ACORDO e ACEITAR os termos deste Regulamento, do Termo de Liberação de Imagem, do Termo de Responsabilidade Civil e do Termos de Responsabilidade Médica.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Será de total responsabilidade do atleta qualquer eventualidade sofrida, isentando de qualquer tipo de responsabilidade o organizador e apoiadores do desafio. 
                    <br><br>
                    8 - <b>PERIODO DE INSCRIÇÕES DE ATLETAS E APOIOS E OS RESPECTIVOS VALORES</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        8.1 - INSCRIÇÕES DOS ATLETAS E APOIO<br>
                              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                             • Início: {{ inicio_insc }} <br>
                              &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                             • Término: {{ fim_insc }}  ou até o limite das vagas<br> 
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        8.2 - O VALOR DA INSCRIÇÃO:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            • Solo: {{ vlSolo }}; <br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            • Dupla: {{ vlDupla }}; <br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            • Quarteto: {{ vlQuarteto }}; <br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            • Octeto: {{ vlOcteto }}<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            + taxa administrativa da plataforma.<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            Pagamento via PIX terá desconto de 5% sobre o valor da inscrição<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        8.3 - Os apoios não pagam inscrição
                    <br><br>
                    9 - <b>NÚMERO MÁXIMO DE ATLETAS</b><br><br> 
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O número máximo de atletas será de 150.<br> 
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Para os atletas SOLO, será permitido 4 apoios inscritos<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Para os atletas que percorrerão o desafio em grupo, será permitido apenas 02 apoios inscritos.
                    <br><br>
                    10 - <b>REGRAS PARA O CANCELAMENTO DA PROVA</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        •  Considerando-se que não haverá nenhum tipo de concentração pública durante o evento 2025 só será cancelada em uma das seguintes condições:<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            1 - Por força de Lei do Estado de Rondônia, Estado do Amazonas ou Municipais.<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            2 - Impedimento da passagem do Atleta devido a existência de Barreiras Sanitárias entre as cidades que fazem parte do percurso do desafio.<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            3 - Caso a BR 319 esteja fechado por qualquer motivo.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Em caso de largada em atraso o término da prova se prorrogará pelo tempo em atraso da largada.
                    <br><br>
                    11 - <b>QUESTÕES TÉCNICAS DAS PROVAS</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Estas regras estão sendo feitas considerando-se as condições e os fatores existentes neste momento em que vivemos. Modificações poderão ser feitas caso a realidade futura seja diferente da realidade de hoje.
                    <br><br>
                    12 - <b>OBRIGAÇÕES E DEVERES</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Os Atletas deverão transportar consigo, o número de peito.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • É obrigatório cumprir as distâncias a pé.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • É obrigatório às equipes de apoio a utilização de veículos (carros, moto e/ou bicicletas).<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Veículos (carros, moto e/ou bicicletas) poderão ser compartilhados por atletas participando.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Atletas e membros das equipes devem ser cordiais, gentis, esportistas e discretos.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Nenhum lixo poderá ser deixado no trajeto da Br durante o caminho.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Os atletas, seus familiares, seus patrocinadores e demais interessados, se comprometem a divulgar os resultados pessoais e das equipes, dentro das suas MODALIDADES.<br> 
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Os carros de apoio podem seguir os atletas durante todo o caminho, seguindo sempre as leis de trânsito e obedecendo as regras de segurança.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Os Atletas SOLO, parados poderão ter todo tipo de contato FÍSICO durante toda a corrida.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Atletas de uma mesma EQUIPES DE REVEZAMENTO podem dar todo tipo de ajuda e ter contato físico durante a corrida inclusive, andar-de-mãos-dadas, entretanto, o atleta não poderá ser puxado, carregado ou empurrado.
                        <br><br>             
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        É OBRIGATÓRIO:<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O carro de apoio está SEMPRE próximo ao atleta, não podendo se distanciar mais que 03 kms.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O atleta ter todos os materiais necessário para uso durante o trajeto.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Uso de lanterna LUZ BRANCA de cabeça (com pilhas ou baterias adicionais) para o percurso no período noturno.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Uso de vestimenta com material refletivo, pelo atleta e equipe de apoio.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O Carro de apoio deverá prestar assistência, caso seja necessário, a qualquer atleta e ou participante do Desafio.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O carro de apoio deverá estar em dia com os itens de segurança, tanque cheio e pneus revisados para evitar maiores transtornos.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Caso o pneu do carro de apoio fure, é obrigatório que o atleta aguarde a troca de pneu para depois sair.<br>
                    <br><br>
                    13 - <b>ATENÇÃO - REGRAS NOVAS - QUESTÕES DE SEGURANÇA</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O Revezamento deverá ser realizado a cada trecho do percurso, não sendo possível outro atleta, mesmo que da mesma equipe percorrer quilometragem diferente da estabelecida para cada membro.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Todos os atletas da equipe, deverão preferencialmente largar juntos e cruzar a linha de chegada juntos. Durante o percurso, podendo cada um fazer a distância estabelecida para cada atleta.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Nenhum atleta de equipe, pode chegar antes na linha de chegada, separado dos outros atletas da equipe.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Caso algum atleta da equipe se machuque durante a prova, outro membro da equipe poderá substituir o atleta lesionado, porém o substituto deverá percorrer toda a distância do atleta lesionado.
                    <br><br>
                    14 - <b>TROCA DE MODALIDADE</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        O Atleta que desejar mudar a modalidade, para solo ou grupo, poderá fazer migração, mas não será garantido medalha, troféu e camiseta para todos que fizerem a mudança depois da data de inscrição.
                    <br><br>
                    15 - <b>QUESTÕES BUROCRÁTICAS E LEGAIS</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Todos os ATLETAS e membros das equipes de APOIO já aceitaram no ato da inscrição:<br> 
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Termo de Isenção de Responsabilidade Civil;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Termo de Isenção de Responsabilidade Médica;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Termo de liberação de Imagem e dados;
                    <br><br>
                    16 - <b>SEGURANÇA E QUESTÕES MÉDICAS</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Nenhum atleta ou participante da equipe de apoio poderá ser deixado para trás sem um acompanhante da equipe.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Lembre-se o tempo todo, que segurança é o mais importante durante toda o desafio. Isto significa a segurança do atleta, da equipe, de apoios, da organização da prova. A Rodovia estará abertas para todos e de fato nessa época do ano, há muitas queimadas e pode haver trânsito intenso.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O Atleta poderá receber auxílio médico/fisioterapêutico ou assistência hospitalar externa, em qualquer lugar ao longo da corrida. O atleta deve estar PARADO para receber auxílio médico/fisioterapêutico e todo tipo de massagens ou qualquer outro tipo de ajuda.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Atletas e acompanhantes noturnos deverão utilizar roupa refletiva ou coletes refletores, bem como LEDs de mão ou cabeça durante a noite (19:00 até 6:00).<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O atleta é responsável pela sua equipe e por suas ações e vice-versa.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Sempre olhe em todas as direções antes de atravessar a estrada. Recomendamos ao atleta só atravessar a rodovia em caso de extrema necessidade e aos membros da equipe o máximo de cuidado ao atravessar a rodovia.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Todos os centímetros do percurso deverão ser corridos pelo atleta. Caso ele erre o caminho ele deverá ser trazido para o ponto onde errou e retomar a corrida.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Não poderá o atleta fazer uso de nenhum tipo de medicação injetável durante a prova.
                    <br><br>
                    17 - <b>Saindo da Corrida Temporariamente ou Desistindo da Prova</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Em caso de desistência o atleta deverá informar ao apoio geral do desafio ou a qualquer atleta ou participante da sua desistência.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Todos os custos de assistência médica ou qualquer outro tipo de emergência médica correrão por conta do atleta e/ou sua equipe.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Toda e qualquer intercorrência deverá ser informada imediatamente à equipe de organização ou à equipe dos pontos de apoio.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Caso o atleta saia temporariamente da prova, este deverá informar a organização, e com a anuência dos organizadores, marcar o local exato que deixou a prova, para retornar. 
                    <br><br>
                    18 - <b>ATENÇÃO: ATESTADO MÉDICO</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Todo Atleta deve realizar os seus exames periódicos e se manter em dia com sua saúde. Fazer exames de rotina evitam problemas durantes as corridas.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Faça seus exames sempre, já que você vai correr o desafio e outras provas ao longo do ano. O IMPORTANTE é a sua saúde. Você é a melhor pessoa para cuidar da sua saúde.
                    <br><br>
                    19 - <b>PREMIAÇÃO DOS ATLETAS</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        Todos os atletas que finalizarem o percurso receberão Medalha, exceto nos casos em que se enqudre em no Item 15 deste Regulamento. 
                    <br><br>
                    20 - <b>PREMIAÇÃO DOS APOIOS</b> 
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Somente Apoios inscritos receberão a Medalha;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Dia 06/07/2026 (domingo) às 19:00h - Premiação de troféus e logo após encerramento do evento.
                    <br><br>
                    21 - <b>TEMPO DE CORTE</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O Atleta solo que chegar no km 100 após 27 horas de prova estará desclassificado;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O Atleta solo que chegar no km 150 após 45 horas de prova será desclassificado;<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O Atleta solo que chegar no km 175 após 47 horas de prova será desclassificado.<br> 
                    <br><br>
                    22 - <b>CUMPRIMENTO DO REGULAMENTO E PENALIDADES</b>
                    <br><br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Todas as infrações relacionadas com desonestidade, agressão ou estupidez entre atletas ou de atletas para os membros do Staff da corrida, desclassificarão o atleta ou equipe imediatamente.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • O descumprimento de qualquer uma das regras deste regulamento implica na desclassificação direta do atleta.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Todos os atletas e membros das equipes, ao participarem da prova, aceitam essas condições integralmente. Este regulamento é soberano e deverá ser acatado por todos os participantes do Desafio, atletas, e equipes de apoio.<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • As regras deste regulamento existem para valorizar, respeitar e dar igualdade a todos<br>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        • Em todas e quaisquer circunstâncias o que vale nessas regras é o espírito esportivo que as regem, e a intenção do organizador do desafio é fazer com que você se desafie a ser melhor em todos os sentidos depois de participar da prova, com igualdade de condições independente da forma e das modalidades de participação.
                    <br><br>                
                    <b>Nosso lema é: desafie-se!!! </b>
                </div>
            </form>


        </div>
    </div>

    <footer class="footer">
        <p><b>"Tudo posso naquele que me fortalece."</b><br> Filipenses 4:13</p>
        <img src="/static/img/ecmdev02.png" alt="Logo ECM Run" class="footer-logo">
        <p class="footer-text">ECM Run - 2025, todos os direitos reservados</p>
        <p class="footer-text">Desenvolvido por: ECM Sistemas Developer</p>
        <p class="footer-text">Versão 1.2</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const modalidadeSelect = document.getElementById('modalidade');
            const valorDiv = document.querySelector('.form-field div');
            const userNameDisplay = document.getElementById('userNameDisplay');
            const loginLink = document.getElementById('loginLink');
            const logoutModal = document.getElementById('logoutModal');
            const continueButton = document.querySelector('.submit-btn');

            // Variáveis para armazenar os valores atuais
            let currentModalidade = {
                id: null,
                descricao: '',
                valor: '',
                valorFormatted: ''
            };
            /// ADICIONADO POR MIM            
            // Function to clear specific payment-related localStorage items
            function clearPaymentRelatedLocalStorage() {
                const itemsToRemove = ['apoio', 'nome_equipe', 'integrantes', 'camiseta', 'vlinscricao', 'vltaxa'];
                
                itemsToRemove.forEach(item => {
                    localStorage.removeItem(item);
                });
            }
            
            ////  17/02/2025
            modalidadeSelect.addEventListener('change', function() {
                const iditem = this.value;

                if (!iditem) {
                    valorDiv.innerHTML = '<a>Valor:</a>';
                    currentModalidade = {
                        id: null,
                        descricao: '',
                        valor: '',
                        valorFormatted: ''
                    };
                    return;
                }
                
                // Armazena a descrição da modalidade selecionada
                const selectedOption = modalidadeSelect.options[modalidadeSelect.selectedIndex];                
                
                currentModalidade.id = iditem;
                currentModalidade.descricao = selectedOption.text;
                
                fetch(`/get_modalidade_valores/${iditem}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.error) {
                            valorDiv.innerHTML = '<a>Erro ao carregar valores</a>';
                            return;
                        }
                        
                        const vlinscricao = data.vlinscricao.toLocaleString('pt-BR', {
                            style: 'currency',
                            currency: 'BRL'
                        });
                        const vltaxa = data.vltaxa.toLocaleString('pt-BR', {
                            style: 'currency',
                            currency: 'BRL'
                        });

                        // Armazena os valores formatados
                        currentModalidade.valorFormatted = `${vlinscricao} + ${vltaxa} = Total: ${(data.vlinscricao + data.vltaxa).toLocaleString('pt-BR', {
                            style: 'currency',
                            currency: 'BRL'
                        })}`;
                        
                        valorDiv.innerHTML = `<a>Valor: ${vlinscricao} + (${vltaxa} de taxa)</a>`;

                        // 'add 1' - adicionado por mim
                        localStorage.setItem('cat_vlinscricao', data.vlinscricao);
                        localStorage.setItem('cat_vltaxa', data.vltaxa);
                        localStorage.setItem('cat_iditem', data.iditem);    
    
                        function startPaymentCheck() {
                            
                            if (checkInterval) {
                                clearInterval(checkInterval);
                            }
                            checkInterval = setInterval(checkPaymentStatus, 5000);
                        }

                        const vlInscricao = localStorage.getItem('cat_vlinscricao');
                        const vlTaxa = localStorage.getItem('cat_vltaxa');
                        const idItem = localStorage.getItem('cat_iditem');
                        
                        // Log para diagnóstico
                        console.log('Dados do localStorage:', {
                            vlInscricao,
                            vlTaxa
                        });            
                        // fim 'add 1'                        
                        
                    })
                    .catch(error => {
                        console.error('Erro:', error);
                        valorDiv.innerHTML = '<a>Erro ao carregar valores</a>';
                    });
            });

            //////////  FIM  17/02/2025
            
            function updateLoginControls() {
                const isLoggedIn = localStorage.getItem('logado') === 'sim';
                const userName = localStorage.getItem('user_name');
                
                if (isLoggedIn && userName) {
                    userNameDisplay.textContent = userName;
                    loginLink.textContent = 'Sair';
                    loginLink.onclick = showLogoutModal;
                } else {
                    userNameDisplay.textContent = '';
                    loginLink.textContent = 'Entrar';
                    loginLink.onclick = () => {
                        localStorage.setItem('login_origin', 'header');
                        window.location.href = '/login';
                    };
                }
            }
    
            function showLogoutModal() {
                logoutModal.style.display = 'flex';
            }
    
            function closeLogoutModal() {
                logoutModal.style.display = 'none';
            }
    
            window.confirmLogout = function() {
                // Clear login-related localStorage items
                const loginItems = [
                    'user_name', 'user_email', 'user_cpf', 'user_dtnascimento',
                    'user_idade', 'user_celular', 'user_sexo', 'user_idatleta',
                    'insc_modalidade', 'insc_apoio', 'insc_equipe200', 'insc_integrantes',
                    'insc_camiseta', 'insc_valor', 'insc_taxa', 'insc_valortotal',
                    'insc_dtpagamento', 'insc_formapgto', 'insc_idpagamento'
                ];
                loginItems.forEach(item => localStorage.removeItem(item));
                
                localStorage.setItem('logado', 'nao');
                closeLogoutModal();
                updateLoginControls();
            }
    
            window.closeLogoutModal = closeLogoutModal;

            // Check login state on page load
            updateLoginControls();
    
            // Update the continue button click handler
            continueButton.addEventListener('click', function(e) {
                e.preventDefault();
                
                if (!currentModalidade.id) {
                    alert('Por favor, selecione uma modalidade antes de continuar.');
                    return;
                }
    
                // Store category information
                localStorage.setItem('categoria_id', currentModalidade.id);
                localStorage.setItem('categoria', currentModalidade.descricao);
                localStorage.setItem('valor', currentModalidade.valorFormatted);
    
                if (localStorage.getItem('logado') === 'sim') {
                    const idPagamento = localStorage.getItem('insc_idpagamento');
                    window.location.href = (!idPagamento || idPagamento === 'none') 
                        ? '/inscricao200k' 
                        : '/formulario200k';
                } else {
                    localStorage.setItem('login_origin', 'continue');
                    window.location.href = '/login';
                }
            });
    
            // Initialize login controls
            updateLoginControls();
        });
    </script>
</body>
</html>
