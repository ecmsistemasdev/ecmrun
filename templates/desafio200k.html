<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="https://ecmrun.com.br/static/img/img_200k.jpg">
    <link rel="stylesheet" type="text/css" href="/static/css/desafio200k.css"/>
    <title>4¬∫ Desafio 200k Porto Velho-HumaitaÃÅ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>
<body>
    <div class="logo-container">
        <img src="https://ecmrun.com.br/static/img/ecmrunlogo1.png" alt="Logo" class="logo">
        <div class="login-controls">
            <span id="userNameDisplay" class="user-name"></span>
            <a href="#" id="loginLink" class="login-link">Entrar</a>
        </div>
    </div>
    
    <div id="logoutModal" class="modal">
        <div class="modal-content">
            <p>Deseja sair da sua conta?</p>
            <div class="modal-buttons">
                <button onclick="confirmLogout()" class="modal-button confirm">Sim</button>
                <button onclick="closeLogoutModal()" class="modal-button cancel">N√£o</button>
            </div>
        </div>
    </div>

    <div class="header">
        <img src="/static/img/img_200k.jpg" alt="Logo" class="center-image">
    </div>
    
    <h1 class="main-title">{{ titulo }}</h1>

    <div class="container">
        
        <form class="registration-form">
            
            <div class="title">Inscri√ß√£o</div>

            <div class="form-row">
            
                <div class="form-field">
                        
                    <label for="modalidade">Modalidade:</label> 
                    <select name="modalidade" id="modalidade" class="form-select"> <!-- disabled="true"> --> 
                        <option selected disabled value="">Selecione uma modalidade</option>
                        {% for modalidade in modalidades %}
                        <option value="{{ modalidade.id }}">{{ modalidade.descricao }}</option>
                        {% endfor %}
                    </select>
                    <div><a>Valor:</a></div> 
                </div>
            </div>
            
            <button type="button" class="submit-btn">Continuar</button>
            <!-- <button type="button" class="submit-btn" disabled="true">Em Breve</button> --> 
            
        </form>
        
        <div class="main-content">
            <form>
                <div class="info">
                
                    <h3 class="info-title">Informativo</h3> 
                    <br>
                    üìÖ Data: 04, 05 e 07 de Julho de 2025<br>
                    üèÉüèª Largada √†s 16hs üïó<br>
                    üìç Sa√≠da: In√≠cio do Espa√ßo Alternativo - Av. Jorge Teixeira (Praia)
                    <br><br>
                    üí≤ Valor da Inscri√ß√£o:<br> 
                    Solo: {{ vlSolo }}; Dupla: {{ vlDupla }}; Quarteto: {{ vlQuarteto }}; Octeto: {{ vlOcteto }}<br>
                    Valor da inscri√ß√£o √© individual no caso de Modalidade em Equipe<br><br>
                    ‚úçÔ∏è <b>Per√≠odo de Inscri√ß√£o:</b><br>
                    In√≠cio: {{ inicio_insc }}<br>
                    T√©rmino: {{ fim_insc }} ou at√© o limite das vagas<br><br>
                    üí∞ <b>Forma de Pagamento:</b><br>
                    Pix e Cart√£o de Cr√©dito<br>
                    <b>Pagamento com Pix tem desconto de 5% sobre o valor da Inscri√ß√£o</b><br>
                    <br>
                    üèÜ Os atletas receber√£o camiseta, viseira, sacolinha, medalha e um trof√©u por equipe ou solo.<br>
                    üöô Os apoio devem fazer a inscri√ß√£o para receber camisa e medalha do evento. Em breve link para inscri√ß√£o do apoio
                    <br><br>
                    Realiza√ß√£o: <b>Grupo de Corrida Macaxeira & Cia</b><br>
                    Siga-nos no Instagram: <br>
                    <a href="https://www.instagram.com/grupodecorridamacaxeiraecia/" target="_blank" class="instagram-link">
                        <img src="/static/img/macaxeiraecia_logo.png" alt="Instagram" width="70" height=100%>
                        <span>@grupodecorridamacaxeiraecia</span>
                    </a>    
                    <a href="https://www.instagram.com/desafio200k" target="_blank" class="instagram-link">
                        <img src="/static/img/logo_200k.png" alt="Instagram" width="70" height=100%>
                        <span>@desafio200k</span>
                    </a>    
                    <br><br>
                    üì± Mais informa√ß√µes: (69) 99925-9005/ (69) 99308-8323 / (69) 99958-3207 <br>
                    
                </div>
            </form>

            <form id="termoForm">
                <div class="form-title">Regulamento</div>
                <div class="termo">
                    Em 2025 teremos a 4¬™ edi√ß√£o do Desafio Porto Velho Humait√°. Haver√° participa√ß√£o de equipes e solo, n√£o se trata de competi√ß√£o, mas um desafio pessoal, em que cada um ser√° respons√°vel por sua seguran√ßa e seguran√ßa de todos na coletividade.
                    <br><br>
                    O Desafio √© um evento de 200km, denominado evento AUTOSSUFICIENTE, no qual o atleta se responsabiliza por sua orienta√ß√£o de percurso, sua alimenta√ß√£o, hidrata√ß√£o, seguran√ßa e tudo que o atleta necessitar√° durante o trajeto junto com a sua equipe de apoio, com largadas em hor√°rios e locais descrito a seguir. 
                    <br><br>
                    O Desafio √© uma prova de autossufici√™ncia, com isso, entenderemos, nos solidarizamos e lamentamos todos os problemas que cada um possa ter, mas N√ÉO HAVER√Å CONCESS√ÉO nenhuma a essa regra, para garantirmos a seguran√ßa de todos.
                    <br><br>
                    1 - <b>MODALIDADES DO DESAFIO</b>
                    <br><br>
                        ‚Ä¢ PROVAS PRINCIPAIS EM 2025 PARA OS 200KM:<br>
                        1 - SOLO - 200 km;<br> 
                        2 - DUPLA - 100 km cada atleta;<br> 
                        3 - QUARTETO - 50 km cada atleta;<br> 
                        4 - OCTETO - 25 km cada atleta.<br><br>
                        A participa√ß√£o na prova s√≥ poder√° ser COM CARRO DE APOIO, cada atleta ou equipe ser√° respons√°vel por seu ve√≠culo e todos os gastos.
                    <br><br>
                    2 - <b>DIA, HORA, LOCAL, TIPO DE LARGADA</b>
                    <br><br>
                        A prova largar√° na seguinte data e hor√°rio:<br>
                        Dia: 04 de Julho de 2025 - Sexta Feira √ÄS 16 horas<br>
                        Local da Largada e chegada: Av. Jorge Teixeira, in√≠cio do Espa√ßo Alternativo (Praia)<br>
                        Largada preferencialmente todos juntos.<br>
                        <b>O Atleta da modalidade solo que largar atrasado ser√° automaticamente desclassificado.</b>
                    <br><br>
                    3 - <b>DURA√á√ÉO, DATA DE T√âRMINO DAS PROVAS</b>
                    <br><br>
                        Dura√ß√£o m√°xima da prova ser√° de 50 horas, chegada at√© √†s 18 horas de domingo de 06/07/2025 no mesmo local da largada.<br>
                        Dia 06/07/2025 (domingo) 18h (tarde) - Encerramento oficial da prova.
                    <br><br>
                    4 - <b>N¬∫ DE PEITO</b>
                    <br><br>
                        Ser√° fornecido n√∫mero de peito para todos os atletas.<br>
                        Os Atletas dever√£o permanecer com o n¬∫ de peito por todo percurso.
                    <br><br>
                    5 - <b>CONGRESSO T√âCNICO</b>
                    <br><br>
                        O Congresso t√©cnico ser√° em dia e local a ser definido e informado pela organiza√ß√£o.<br>
                        ‚Ä¢ √â OBRIGAT√ìRIO A PARTICIPA√á√ÉO DO ATLETA E/OU APOIO NO CONGRESSO T√âCNICO, SENDO A AUS√äNCIA SEM JUSTIFICATIVA MOTIVO DE DESCLASSIFICA√á√ÉO.
                    <br><br>
                    6 - <B>PONTOS DE COMUNICA√á√ÉO ENTRE ATLETAS E ORGANIZA√á√ÉO</B>
                    <br><br>
                        ‚Ä¢ Carro de Apoio da organiza√ß√£o e pontos de apoios fixos no decorrer do percurso nos kms 25, 50, 75, 100, 125, 150, 175.
                    <br><br>
                    7 - <b>CRIT√âRIOS PARA PARTICIPA√á√ÉO</b>
                    <br><br>
                        Para o atleta poder participar do desafio ser√° necess√°rio:<br>
                        ‚Ä¢ Ter 18 anos completos no dia da prova;<br>
                        ‚Ä¢ Est√° em plenas condi√ß√µes f√≠sicas;<br>
                        ‚Ä¢ Ter realizado a inscri√ß√£o do desafio;<br>
                        ‚Ä¢ Estar de ACORDO e ACEITAR os termos deste Regulamento, do Termo de Libera√ß√£o de Imagem, do Termo de Responsabilidade Civil e do Termos de Responsabilidade M√©dica.<br>
                        ‚Ä¢ Ser√° de total responsabilidade do atleta qualquer eventualidade sofrida, isentando de qualquer tipo de responsabilidade o organizador e apoiadores do desafio. 
                    <br><br>
                    8 - <b>PERIODO DE INSCRI√á√ïES DE ATLETAS E APOIOS E OS RESPECTIVOS VALORES</b>
                    <br><br>
                        8.1 - INSCRI√á√ïES DOS ATLETAS E APOIO<br>
                             ‚Ä¢ In√≠cio: {{ inicio_insc }} <br>
                             ‚Ä¢ T√©rmino: {{ fim_insc }}  ou at√© o limite das vagas<br> 
                        8.2 - O VALOR DA INSCRI√á√ÉO:<br>
                            ‚Ä¢ Solo: {{ vlSolo }}; <br>
                            ‚Ä¢ Dupla: {{ vlDupla }}; <br>
                            ‚Ä¢ Quarteto: {{ vlQuarteto }}; <br>
                            ‚Ä¢ Octeto: {{ vlOcteto }}<br>
                            + taxa administrativa da plataforma.<br>
                            Pagamento via PIX ter√° desconto de 5% sobre o valor da inscri√ß√£o<br>
                        8.3 - Os apoios n√£o pagam inscri√ß√£o
                    <br><br>
                    9 - <b>N√öMERO M√ÅXIMO DE ATLETAS</b><br><br> 
                        ‚Ä¢ O n√∫mero m√°ximo de atletas ser√° de 150.<br> 
                        ‚Ä¢ Para os atletas SOLO, ser√° permitido 4 apoios inscritos<br>
                        ‚Ä¢ Para os atletas que percorrer√£o o desafio em grupo, ser√° permitido apenas 02 apoios inscritos.
                    <br><br>
                    10 - <b>REGRAS PARA O CANCELAMENTO DA PROVA</b>
                    <br><br>
                        ‚Ä¢  Considerando-se que n√£o haver√° nenhum tipo de concentra√ß√£o p√∫blica durante o evento 2025 s√≥ ser√° cancelada em uma das seguintes condi√ß√µes:<br>
                            1 - Por for√ßa de Lei do Estado de Rond√¥nia, Estado do Amazonas ou Municipais.<br>
                            2 - Impedimento da passagem do Atleta devido a exist√™ncia de Barreiras Sanit√°rias entre as cidades que fazem parte do percurso do desafio.<br>
                            3 - Caso a BR 319 esteja fechado por qualquer motivo.<br>
                        ‚Ä¢ Em caso de largada em atraso o t√©rmino da prova se prorrogar√° pelo tempo em atraso da largada.
                    <br><br>
                    11 - <b>QUEST√ïES T√âCNICAS DAS PROVAS</b>
                    <br><br>
                        Estas regras est√£o sendo feitas considerando-se as condi√ß√µes e os fatores existentes neste momento em que vivemos. Modifica√ß√µes poder√£o ser feitas caso a realidade futura seja diferente da realidade de hoje.
                    <br><br>
                    12 - <b>OBRIGA√á√ïES E DEVERES</b>
                    <br><br>
                        ‚Ä¢ Os Atletas dever√£o transportar consigo, o n√∫mero de peito.<br>
                        ‚Ä¢ √â obrigat√≥rio cumprir as dist√¢ncias a p√©.<br>
                        ‚Ä¢ √â obrigat√≥rio √†s equipes de apoio a utiliza√ß√£o de ve√≠culos (carros, moto e/ou bicicletas).<br>
                        ‚Ä¢ Ve√≠culos (carros, moto e/ou bicicletas) poder√£o ser compartilhados por atletas participando.<br>
                        ‚Ä¢ Atletas e membros das equipes devem ser cordiais, gentis, esportistas e discretos.<br>
                        ‚Ä¢ Nenhum lixo poder√° ser deixado no trajeto da Br durante o caminho.<br>
                        ‚Ä¢ Os atletas, seus familiares, seus patrocinadores e demais interessados, se comprometem a divulgar os resultados pessoais e das equipes, dentro das suas MODALIDADES.<br> 
                        ‚Ä¢ Os carros de apoio podem seguir os atletas durante todo o caminho, seguindo sempre as leis de tr√¢nsito e obedecendo as regras de seguran√ßa.<br>
                        ‚Ä¢ Os Atletas SOLO, parados poder√£o ter todo tipo de contato F√çSICO durante toda a corrida.<br>
                        ‚Ä¢ Atletas de uma mesma EQUIPES DE REVEZAMENTO podem dar todo tipo de ajuda e ter contato f√≠sico durante a corrida inclusive, andar-de-m√£os-dadas, entretanto, o atleta n√£o poder√° ser puxado, carregado ou empurrado.
                        <br><br>             
                        √â OBRIGAT√ìRIO:<br>
                        ‚Ä¢ O carro de apoio est√° SEMPRE pr√≥ximo ao atleta, n√£o podendo se distanciar mais que 03 kms.<br>
                        ‚Ä¢ O atleta ter todos os materiais necess√°rio para uso durante o trajeto.<br>
                        ‚Ä¢ Uso de lanterna LUZ BRANCA de cabe√ßa (com pilhas ou baterias adicionais) para o percurso no per√≠odo noturno.<br>
                        ‚Ä¢ Uso de vestimenta com material refletivo, pelo atleta e equipe de apoio.<br>
                        ‚Ä¢ O Carro de apoio dever√° prestar assist√™ncia, caso seja necess√°rio, a qualquer atleta e ou participante do Desafio.<br>
                        ‚Ä¢ O carro de apoio dever√° estar em dia com os itens de seguran√ßa, tanque cheio e pneus revisados para evitar maiores transtornos.<br>
                        ‚Ä¢ Caso o pneu do carro de apoio fure, √© obrigat√≥rio que o atleta aguarde a troca de pneu para depois sair.<br>
                    <br><br>
                    13 - <b>ATEN√á√ÉO - REGRAS NOVAS - QUEST√ïES DE SEGURAN√áA</b>
                    <br><br>
                        ‚Ä¢ O Revezamento dever√° ser realizado a cada trecho do percurso, n√£o sendo poss√≠vel outro atleta, mesmo que da mesma equipe percorrer quilometragem diferente da estabelecida para cada membro.<br>
                        ‚Ä¢ Todos os atletas da equipe, dever√£o preferencialmente largar juntos e cruzar a linha de chegada juntos. Durante o percurso, podendo cada um fazer a dist√¢ncia estabelecida para cada atleta.<br>
                        ‚Ä¢ Nenhum atleta de equipe, pode chegar antes na linha de chegada, separado dos outros atletas da equipe.<br>
                        ‚Ä¢ Caso algum atleta da equipe se machuque durante a prova, outro membro da equipe poder√° substituir o atleta lesionado, por√©m o substituto dever√° percorrer toda a dist√¢ncia do atleta lesionado.
                    <br><br>
                    14 - <b>TROCA DE MODALIDADE</b>
                    <br><br>
                        O Atleta que desejar mudar a modalidade, para solo ou grupo, poder√° fazer migra√ß√£o, mas n√£o ser√° garantido medalha, trof√©u e camiseta para todos que fizerem a mudan√ßa depois da data de inscri√ß√£o.
                    <br><br>
                    15 - <b>QUEST√ïES BUROCR√ÅTICAS E LEGAIS</b>
                    <br><br>
                        Todos os ATLETAS e membros das equipes de APOIO j√° aceitaram no ato da inscri√ß√£o:<br> 
                        ‚Ä¢ Termo de Isen√ß√£o de Responsabilidade Civil;<br>
                        ‚Ä¢ Termo de Isen√ß√£o de Responsabilidade M√©dica;<br>
                        ‚Ä¢ Termo de libera√ß√£o de Imagem e dados;
                    <br><br>
                    16 - <b>SEGURAN√áA E QUEST√ïES M√âDICAS</b>
                    <br><br>
                        ‚Ä¢ Nenhum atleta ou participante da equipe de apoio poder√° ser deixado para tr√°s sem um acompanhante da equipe.<br>
                        ‚Ä¢ Lembre-se o tempo todo, que seguran√ßa √© o mais importante durante toda o desafio. Isto significa a seguran√ßa do atleta, da equipe, de apoios, da organiza√ß√£o da prova. A Rodovia estar√° abertas para todos e de fato nessa √©poca do ano, h√° muitas queimadas e pode haver tr√¢nsito intenso.<br>
                        ‚Ä¢ O Atleta poder√° receber aux√≠lio m√©dico/fisioterap√™utico ou assist√™ncia hospitalar externa, em qualquer lugar ao longo da corrida. O atleta deve estar PARADO para receber aux√≠lio m√©dico/fisioterap√™utico e todo tipo de massagens ou qualquer outro tipo de ajuda.<br>
                        ‚Ä¢ Atletas e acompanhantes noturnos dever√£o utilizar roupa refletiva ou coletes refletores, bem como LEDs de m√£o ou cabe√ßa durante a noite (19:00 at√© 6:00).<br>
                        ‚Ä¢ O atleta √© respons√°vel pela sua equipe e por suas a√ß√µes e vice-versa.<br>
                        ‚Ä¢ Sempre olhe em todas as dire√ß√µes antes de atravessar a estrada. Recomendamos ao atleta s√≥ atravessar a rodovia em caso de extrema necessidade e aos membros da equipe o m√°ximo de cuidado ao atravessar a rodovia.<br>
                        ‚Ä¢ Todos os cent√≠metros do percurso dever√£o ser corridos pelo atleta. Caso ele erre o caminho ele dever√° ser trazido para o ponto onde errou e retomar a corrida.<br>
                        ‚Ä¢ N√£o poder√° o atleta fazer uso de nenhum tipo de medica√ß√£o injet√°vel durante a prova.
                    <br><br>
                    17 - <b>Saindo da Corrida Temporariamente ou Desistindo da Prova</b>
                    <br><br>
                        ‚Ä¢ Em caso de desist√™ncia o atleta dever√° informar ao apoio geral do desafio ou a qualquer atleta ou participante da sua desist√™ncia.<br>
                        ‚Ä¢ Todos os custos de assist√™ncia m√©dica ou qualquer outro tipo de emerg√™ncia m√©dica correr√£o por conta do atleta e/ou sua equipe.<br>
                        ‚Ä¢ Toda e qualquer intercorr√™ncia dever√° ser informada imediatamente √† equipe de organiza√ß√£o ou √† equipe dos pontos de apoio.<br>
                        ‚Ä¢ Caso o atleta saia temporariamente da prova, este dever√° informar a organiza√ß√£o, e com a anu√™ncia dos organizadores, marcar o local exato que deixou a prova, para retornar. 
                    <br><br>
                    18 - <b>ATEN√á√ÉO: ATESTADO M√âDICO</b>
                    <br><br>
                        Todo Atleta deve realizar os seus exames peri√≥dicos e se manter em dia com sua sa√∫de. Fazer exames de rotina evitam problemas durantes as corridas.<br>
                        Fa√ßa seus exames sempre, j√° que voc√™ vai correr o desafio e outras provas ao longo do ano. O IMPORTANTE √© a sua sa√∫de. Voc√™ √© a melhor pessoa para cuidar da sua sa√∫de.
                    <br><br>
                    19 - <b>PREMIA√á√ÉO DOS ATLETAS</b>
                    <br><br>
                        Todos os atletas que finalizarem o percurso receber√£o Medalha, exceto nos casos em que se enqudre em no Item 15 deste Regulamento. 
                    <br><br>
                    20 - <b>PREMIA√á√ÉO DOS APOIOS</b> 
                    <br><br>
                        ‚Ä¢ Somente Apoios inscritos receber√£o a Medalha;<br>
                        ‚Ä¢ Dia 06/07/2026 (domingo) √†s 19:00h - Premia√ß√£o de trof√©us e logo ap√≥s encerramento do evento.
                    <br><br>
                    21 - <b>TEMPO DE CORTE</b>
                    <br><br>
                        ‚Ä¢ O Atleta solo que chegar no km 100 ap√≥s 27 horas de prova estar√° desclassificado;<br>
                        ‚Ä¢ O Atleta solo que chegar no km 150 ap√≥s 45 horas de prova ser√° desclassificado;<br>
                        ‚Ä¢ O Atleta solo que chegar no km 175 ap√≥s 47 horas de prova ser√° desclassificado.<br> 
                    <br><br>
                    22 - <b>CUMPRIMENTO DO REGULAMENTO E PENALIDADES</b>
                    <br><br>
                        ‚Ä¢ Todas as infra√ß√µes relacionadas com desonestidade, agress√£o ou estupidez entre atletas ou de atletas para os membros do Staff da corrida, desclassificar√£o o atleta ou equipe imediatamente.<br>
                        ‚Ä¢ O descumprimento de qualquer uma das regras deste regulamento implica na desclassifica√ß√£o direta do atleta.<br>
                        ‚Ä¢ Todos os atletas e membros das equipes, ao participarem da prova, aceitam essas condi√ß√µes integralmente. Este regulamento √© soberano e dever√° ser acatado por todos os participantes do Desafio, atletas, e equipes de apoio.<br>
                        ‚Ä¢ As regras deste regulamento existem para valorizar, respeitar e dar igualdade a todos<br>
                        ‚Ä¢ Em todas e quaisquer circunst√¢ncias o que vale nessas regras √© o esp√≠rito esportivo que as regem, e a inten√ß√£o do organizador do desafio √© fazer com que voc√™ se desafie a ser melhor em todos os sentidos depois de participar da prova, com igualdade de condi√ß√µes independente da forma e das modalidades de participa√ß√£o.
                    <br><br>                
                    <b>Nosso lema √©: desafie-se!!! </b>
                </div>
            </form>
        </div>
    </div>

    <footer class="footer">
        <p><b>"Tudo posso naquele que me fortalece."</b><br> Filipenses 4:13</p>
        <img src="/static/img/ecmdev02.png" alt="Logo ECM Run" class="footer-logo">
        <p class="footer-text">ECM Run - 2025, todos os direitos reservados</p>
        <p class="footer-text">Desenvolvido por: ECM Sistemas Developer</p>
        <p class="footer-text">Vers√£o 1.2</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const modalidadeSelect = document.getElementById('modalidade');
            const valorDiv = document.querySelector('.form-field div');
            const userNameDisplay = document.getElementById('userNameDisplay');
            const loginLink = document.getElementById('loginLink');
            const logoutModal = document.getElementById('logoutModal');
            const continueButton = document.querySelector('.submit-btn');

            // Vari√°veis para armazenar os valores atuais
            let currentModalidade = {
                id: null,
                descricao: '',
                valor: '',
                valorFormatted: ''
            };
            
            // Obter as datas de inscri√ß√£o
            const inicioInsc = "{{ dt_inicio_insc }}";
            const fimInsc = "{{ dt_fim_insc }}";            
            
            // Fun√ß√£o para verificar o per√≠odo de inscri√ß√£o e atualizar o bot√£o
            function updateButtonState() {
                if (!inicioInsc || !fimInsc) {
                    console.log("Datas de inscri√ß√£o n√£o dispon√≠veis");
                    return;
                }

                const now = new Date();
                
                // Converter as strings de data para objetos Date
                const dtInicio = convertBrazilianDateToJsDate(inicioInsc);
                const dtFim = convertBrazilianDateToJsDate(fimInsc);
                
                console.log("Agora:", now);
                console.log("In√≠cio:", dtInicio);
                console.log("Fim:", dtFim);
                
                // Verificar em qual per√≠odo estamos
                if (now < dtInicio) {
                    // Antes do per√≠odo de inscri√ß√£o
                    continueButton.textContent = "Em Breve";
                    continueButton.disabled = true;
                    continueButton.style.backgroundColor = "#FFA500"; // Laranja
                   
                    // Garantir que o contador esteja vis√≠vel
                    const contador = document.getElementById('contador-regressivo');
                    if (contador) contador.style.display = 'block';                    
                } else if (now > dtFim) {
                    // Ap√≥s o per√≠odo de inscri√ß√£o
                    continueButton.textContent = "Encerrado";
                    continueButton.disabled = true;
                    continueButton.style.backgroundColor = "#FF6666"; // Vermelho claro
      
                    // Ocultar o contador
                    const contador = document.getElementById('contador-regressivo');
                    if (contador) contador.style.display = 'none';      
                } else {
                    // Durante o per√≠odo de inscri√ß√£o
                    continueButton.textContent = "Continuar";
                    continueButton.disabled = false;
                    continueButton.style.backgroundColor = "#1d72cc"; // Cor original azul
                    
                    // Ocultar o contador
                    const contador = document.getElementById('contador-regressivo');
                    if (contador) contador.style.display = 'none';      
                }
            }
            
            // Fun√ß√£o para converter data no formato brasileiro para objeto Date do JavaScript
            function convertBrazilianDateToJsDate(dateStr) {
                if (!dateStr) return new Date(0); // Data m√≠nima se n√£o houver data
                
                try {
                    // Formato esperado: dd/mm/yyyy hh:mm:ss
                    const parts = dateStr.split(' ');
                    const dateParts = parts[0].split('/');
                    const timeParts = parts[1] ? parts[1].split(':') : ['00', '00', '00'];
                    
                    // M√™s em JavaScript √© 0-indexed (jan=0, fev=1, etc)
                    return new Date(
                        parseInt(dateParts[2]), // ano
                        parseInt(dateParts[1]) - 1, // m√™s (0-11)
                        parseInt(dateParts[0]), // dia
                        parseInt(timeParts[0]), // hora
                        parseInt(timeParts[1]), // minuto
                        parseInt(timeParts[2])  // segundo
                    );
                } catch (e) {
                    console.error("Erro ao converter data:", e);
                    return new Date();
                }
            }
                        
            // Function to clear specific payment-related localStorage items
            function clearPaymentRelatedLocalStorage() {
                const itemsToRemove = ['apoio', 'nome_equipe', 'integrantes', 'camiseta', 'vlinscricao', 'vltaxa'];
                
                itemsToRemove.forEach(item => {
                    localStorage.removeItem(item);
                });
            }


            // Adicione essa fun√ß√£o ao seu script existente
            function adicionarContadorRegressivo() {
                // Criar elemento para o contador
                const contadorDiv = document.createElement('div');
                contadorDiv.id = 'contador-regressivo';
                contadorDiv.style.textAlign = 'center';
                contadorDiv.style.marginTop = '10px';
                contadorDiv.style.marginBottom = '10px';
                contadorDiv.style.fontSize = '14px';
                contadorDiv.style.fontWeight = 'bold';
                contadorDiv.style.color = '#1d72cc';
                
                // Inserir o contador ap√≥s o bot√£o
                const submitBtn = document.querySelector('.submit-btn');
                submitBtn.parentNode.insertBefore(contadorDiv, submitBtn.nextSibling);
                
                // Fun√ß√£o para atualizar o contador
                function atualizarContador() {
                    if (!inicioInsc) {
                    contadorDiv.textContent = "Data de in√≠cio n√£o definida";
                    return;
                    }
                    
                    const agora = new Date();
                    const dtInicio = convertBrazilianDateToJsDate(inicioInsc);
                    
                    // Se j√° passou da data de in√≠cio, esconda o contador
                    if (agora >= dtInicio) {
                    contadorDiv.style.display = 'none';
                    updateButtonState(); // Atualizar o estado do bot√£o
                    return;
                    }
                    
                    // Calcular a diferen√ßa de tempo
                    const diferenca = dtInicio - agora;
                    
                    // Calcular dias, horas, minutos e segundos
                    const dias = Math.floor(diferenca / (1000 * 60 * 60 * 24));
                    const horas = Math.floor((diferenca % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutos = Math.floor((diferenca % (1000 * 60 * 60)) / (1000 * 60));
                    const segundos = Math.floor((diferenca % (1000 * 60)) / 1000);
                    
                    // Formata√ß√£o inteligente para ocultar unidades zeradas
                    let contadorTexto = "Inscri√ß√µes come√ßam em: ";
                    let tempoAdicionado = false;
                    
                    if (dias > 0) {
                    contadorTexto += `${dias}d `;
                    tempoAdicionado = true;
                    }
                    
                    if (horas > 0 || tempoAdicionado) {
                    contadorTexto += `${horas}h `;
                    tempoAdicionado = true;
                    }
                    
                    if (minutos > 0 || tempoAdicionado) {
                    contadorTexto += `${minutos}m `;
                    tempoAdicionado = true;
                    }
                    
                    // Sempre mostrar os segundos
                    contadorTexto += `${segundos}s`;
                    
                    // Atualizar o texto do contador
                    contadorDiv.innerHTML = contadorTexto;
                    
                    // Atualizar o bot√£o se necess√°rio
                    updateButtonState();
                }
                
                // Atualizar o contador a cada segundo
                const intervalId = setInterval(atualizarContador, 1000);
                
                // Executar imediatamente para n√£o esperar o primeiro intervalo
                atualizarContador();
                
                // Armazenar o ID do intervalo para limpeza posterior se necess√°rio
                return intervalId;
            }

            // Adicione esta fun√ß√£o ao seu script existente
            function verificarEAtualizarDadosUsuario() {
                // Verifica se o usu√°rio est√° logado pelo localStorage
                const isLoggedIn = localStorage.getItem('logado') === 'sim';
                
                if (isLoggedIn) {
                    // Recupera dados b√°sicos do usu√°rio
                    const userEmail = localStorage.getItem('user_email');
                    const userCpf = localStorage.getItem('user_cpf');
                    
                    if (userEmail || userCpf) {
                        // Envia solicita√ß√£o para atualizar os dados do usu√°rio
                        fetch('/check-user-session', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                email: userEmail,
                                cpf: userCpf
                            })
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.success) {
                                console.log('Dados do usu√°rio atualizados com sucesso');
                                
                                // Atualiza os dados no localStorage
                                localStorage.setItem('user_name', data.nome);
                                localStorage.setItem('user_email', data.email);
                                localStorage.setItem('user_cpf', data.cpf);
                                localStorage.setItem('user_dtnascimento', data.dtnascimento);
                                localStorage.setItem('user_idade', data.idade);
                                localStorage.setItem('user_celular', data.celular);
                                localStorage.setItem('user_sexo', data.sexo);
                                localStorage.setItem('user_idatleta', data.idatleta);
                                localStorage.setItem('insc_modalidade', data.modalidade);
                                localStorage.setItem('insc_apoio', data.apoio);
                                localStorage.setItem('insc_equipe200', data.equipe200);
                                localStorage.setItem('insc_integrantes', data.integrantes);
                                localStorage.setItem('insc_camiseta', data.camiseta);
                                localStorage.setItem('insc_valor', data.valor);
                                localStorage.setItem('insc_taxa', data.taxa);
                                localStorage.setItem('insc_valortotal', data.valortotal);
                                localStorage.setItem('insc_dtpagamento', data.dtpagamento);
                                localStorage.setItem('insc_formapgto', data.formapgto);
                                localStorage.setItem('insc_idpagamento', data.idpagamento);
                                
                                // Atualiza os controles de login
                                updateLoginControls();
                            } else {
                                console.error('Falha ao atualizar dados do usu√°rio:', data.message);
                                // Se o usu√°rio n√£o for encontrado, faz logout
                                if (data.message === 'Usu√°rio n√£o encontrado ou inativo') {
                                    localStorage.setItem('logado', 'nao');
                                    updateLoginControls();
                                }
                            }
                        })
                        .catch(error => {
                            console.error('Erro ao verificar sess√£o do usu√°rio:', error);
                        });
                    }
                }
            }

            verificarEAtualizarDadosUsuario();



            adicionarContadorRegressivo();

            function adicionarContadorRegressivoDesafio() {
                // Data de in√≠cio do evento vem do Flask
                const dtInicioEvento = "{{ dt_inicio_evento }}";
                
                // Criar elemento do contador
                const contadorContainer = document.createElement('div');
                contadorContainer.id = 'contador-desafio';
                contadorContainer.className = 'contador-container';
                contadorContainer.style.textAlign = 'center';
                contadorContainer.style.padding = '15px';
                contadorContainer.style.margin = '20px auto';
                contadorContainer.style.maxWidth = '500px';
                contadorContainer.style.backgroundColor = '#f8f9fa';
                contadorContainer.style.borderRadius = '10px';
                contadorContainer.style.boxShadow = '0 2px 5px rgba(0,0,0,0.1)';
                
                // T√≠tulo do contador
                const contadorTitulo = document.createElement('h3');
                contadorTitulo.textContent = 'CONTAGEM REGRESSIVA PARA O DESAFIO';
                contadorTitulo.style.color = '#1d72cc';
                contadorTitulo.style.margin = '0 0 10px 0';
                contadorContainer.appendChild(contadorTitulo);
                
                // Div para mostrar o tempo
                const contadorTempo = document.createElement('div');
                contadorTempo.id = 'tempo-desafio';
                contadorTempo.style.fontSize = '24px';
                contadorTempo.style.fontWeight = 'bold';
                contadorTempo.style.color = '#333';
                contadorContainer.appendChild(contadorTempo);
                
                // Data do evento
                const dataEvento = document.createElement('div');
                dataEvento.style.marginTop = '10px';
                dataEvento.style.fontSize = '16px';
                dataEvento.style.color = '#666';
                dataEvento.textContent = 'In√≠cio: 04 de Julho de 2025 √†s 16:00';
                contadorContainer.appendChild(dataEvento);
                
                // Inserir o contador ap√≥s a informa√ß√£o (antes do regulamento)
                //const infoSection = document.querySelector('.info');
                //if (infoSection) {
                //    const mainContent = document.querySelector('.main-content');
                //    mainContent.insertBefore(contadorContainer, document.getElementById('termoForm'));
                //}

                const registrationForm = document.querySelector('.registration-form');
                if (registrationForm) {
                    registrationForm.parentNode.insertBefore(contadorContainer, registrationForm.nextSibling);
                }                
                
                // Fun√ß√£o para atualizar o contador
                function atualizarContadorDesafio() {
                    // Data do evento (usar hora fornecida no HTML, mas tamb√©m pode vir do backend)
                    let dataEvento;
                    
                    if (dtInicioEvento && dtInicioEvento !== "{{ dt_inicio_evento }}") {
                        // Se a data vier do backend no formato brasileiro dd/mm/yyyy
                        dataEvento = convertBrazilianDateToJsDate(dtInicioEvento);
                    } else {
                        // Data fixa conforme informativo (04/07/2025 √†s 16h)
                        dataEvento = new Date(2025, 6, 4, 16, 0, 0); // Julho √© 6 (zero-based)
                    }
                    
                    const agora = new Date();
                    
                    // Diferen√ßa em milissegundos
                    const diferenca = dataEvento - agora;
                    
                    // Verificar se o evento j√° aconteceu
                    if (diferenca <= 0) {
                        contadorTempo.innerHTML = 'O DESAFIO J√Å COME√áOU!';
                        return;
                    }
                    
                    // Calcular dias, horas, minutos e segundos
                    const dias = Math.floor(diferenca / (1000 * 60 * 60 * 24));
                    const horas = Math.floor((diferenca % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutos = Math.floor((diferenca % (1000 * 60 * 60)) / (1000 * 60));
                    const segundos = Math.floor((diferenca % (1000 * 60)) / 1000);
                    
                    // Formatar cada unidade de tempo com dois d√≠gitos
                    const diasFormatados = dias.toString().padStart(2, '0');
                    const horasFormatadas = horas.toString().padStart(2, '0');
                    const minutosFormatados = minutos.toString().padStart(2, '0');
                    const segundosFormatados = segundos.toString().padStart(2, '0');
                    
                    // Atualizar o contador com divs para cada unidade de tempo
                    contadorTempo.innerHTML = `
                        <div class="tempo-unidade">
                            <span class="tempo-valor">${diasFormatados}</span>
                            <span class="tempo-label">Dias</span>
                        </div>
                        <span class="tempo-separador">:</span>
                        <div class="tempo-unidade">
                            <span class="tempo-valor">${horasFormatadas}</span>
                            <span class="tempo-label">Horas</span>
                        </div>
                        <span class="tempo-separador">:</span>
                        <div class="tempo-unidade">
                            <span class="tempo-valor">${minutosFormatados}</span>
                            <span class="tempo-label">Min</span>
                        </div>
                        <span class="tempo-separador">:</span>
                        <div class="tempo-unidade">
                            <span class="tempo-valor">${segundosFormatados}</span>
                            <span class="tempo-label">Seg</span>
                        </div>
                    `;
                }
                
                // Estilo para o contador
                const style = document.createElement('style');
                style.textContent = `
                    .contador-container {
                        background: linear-gradient(135deg, #f0f8ff 0%, #e6f2ff 100%);
                    }
                    #tempo-desafio {
                        display: flex;
                        justify-content: center;
                        align-items: center;
                        gap: 5px;
                    }
                    .tempo-unidade {
                        display: inline-flex;
                        flex-direction: column;
                        align-items: center;
                        background-color: #1d72cc;
                        color: white;
                        border-radius: 5px;
                        padding: 5px;
                        min-width: 60px;
                    }
                    .tempo-valor {
                        font-size: 28px;
                        font-weight: bold;
                    }
                    .tempo-label {
                        font-size: 12px;
                        text-transform: uppercase;
                    }
                    .tempo-separador {
                        font-size: 28px;
                        font-weight: bold;
                        color: #1d72cc;
                    }
                `;
                document.head.appendChild(style);
                
                // Iniciar o contador
                atualizarContadorDesafio();
                setInterval(atualizarContadorDesafio, 1000);
            }            
            
            adicionarContadorRegressivoDesafio();            
            
            ////  17/02/2025
            modalidadeSelect.addEventListener('change', function() {
                const iditem = this.value;

                if (!iditem) {
                    valorDiv.innerHTML = '<a>Valor:</a>';
                    currentModalidade = {
                        id: null,
                        descricao: '',
                        valor: '',
                        valorFormatted: ''
                    };
                    return;
                }
                
                // Armazena a descri√ß√£o da modalidade selecionada
                const selectedOption = modalidadeSelect.options[modalidadeSelect.selectedIndex];                
                
                currentModalidade.id = iditem;
                currentModalidade.descricao = selectedOption.text;
                
                fetch(`/get_modalidade_valores/${iditem}`)
                    .then(response => response.json())
                    .then(data => {
                        if (data.error) {
                            valorDiv.innerHTML = '<a>Erro ao carregar valores</a>';
                            return;
                        }
                        
                        const vlinscricao = data.vlinscricao.toLocaleString('pt-BR', {
                            style: 'currency',
                            currency: 'BRL'
                        });
                        const vltaxa = data.vltaxa.toLocaleString('pt-BR', {
                            style: 'currency',
                            currency: 'BRL'
                        });

                        // Armazena os valores formatados
                        currentModalidade.valorFormatted = `${vlinscricao} + ${vltaxa} = Total: ${(data.vlinscricao + data.vltaxa).toLocaleString('pt-BR', {
                            style: 'currency',
                            currency: 'BRL'
                        })}`;
                        
                        valorDiv.innerHTML = `<a>Valor: ${vlinscricao} + (${vltaxa} de taxa)</a>`;

                        // 'add 1' - adicionado por mim
                        localStorage.setItem('cat_vlinscricao', data.vlinscricao);
                        localStorage.setItem('cat_vltaxa', data.vltaxa);
                        localStorage.setItem('cat_iditem', data.iditem);    
    
                        function startPaymentCheck() {
                            
                            if (checkInterval) {
                                clearInterval(checkInterval);
                            }
                            checkInterval = setInterval(checkPaymentStatus, 5000);
                        }

                        const vlInscricao = localStorage.getItem('cat_vlinscricao');
                        const vlTaxa = localStorage.getItem('cat_vltaxa');
                        const idItem = localStorage.getItem('cat_iditem');
                        
                        // Log para diagn√≥stico
                        console.log('Dados do localStorage:', {
                            vlInscricao,
                            vlTaxa
                        });            
                        // fim 'add 1'                        
                        
                    })
                    .catch(error => {
                        console.error('Erro:', error);
                        valorDiv.innerHTML = '<a>Erro ao carregar valores</a>';
                    });
            });

            //////////  FIM  17/02/2025
            
            function updateLoginControls() {
                const isLoggedIn = localStorage.getItem('logado') === 'sim';
                const userName = localStorage.getItem('user_name');
                
                if (isLoggedIn && userName) {
                    userNameDisplay.textContent = userName;
                    loginLink.textContent = 'Sair';
                    loginLink.onclick = showLogoutModal;
                } else {
                    userNameDisplay.textContent = '';
                    loginLink.textContent = 'Entrar';
                    loginLink.onclick = () => {
                        localStorage.setItem('login_origin', 'header');
                        window.location.href = '/login';
                    };
                }
            }
    
            function showLogoutModal() {
                logoutModal.style.display = 'flex';
            }
    
            function closeLogoutModal() {
                logoutModal.style.display = 'none';
            }
    
            window.confirmLogout = function() {
                // Clear login-related localStorage items
                const loginItems = [
                    'user_name', 'user_email', 'user_cpf', 'user_dtnascimento',
                    'user_idade', 'user_celular', 'user_sexo', 'user_idatleta',
                    'insc_modalidade', 'insc_apoio', 'insc_equipe200', 'insc_integrantes',
                    'insc_camiseta', 'insc_valor', 'insc_taxa', 'insc_valortotal',
                    'insc_dtpagamento', 'insc_formapgto', 'insc_idpagamento'
                ];

                loginItems.forEach(item => localStorage.removeItem(item));
                
                localStorage.setItem('logado', 'nao');
                closeLogoutModal();
                updateLoginControls();
            }
    
            window.closeLogoutModal = closeLogoutModal;

            // Check login state on page load
            updateLoginControls();
    
            // Update the continue button click handler
            continueButton.addEventListener('click', function(e) {
                e.preventDefault();
                
                if (!currentModalidade.id) {
                    alert('Por favor, selecione uma modalidade antes de continuar.');
                    return;
                }
    
                // Store category information
                localStorage.setItem('categoria_id', currentModalidade.id);
                localStorage.setItem('categoria', currentModalidade.descricao);
                localStorage.setItem('valor', currentModalidade.valorFormatted);
    
                if (localStorage.getItem('logado') === 'sim') {
                    // Verificar se o idPagamento existe e n√£o √© 'none'
                    const idPagamento = localStorage.getItem('insc_idpagamento');
                    console.log('ID Pagamento ao clicar em Continuar:', idPagamento);
                    
                    // Redirecionar com base no valor do idPagamento
                    if (idPagamento && idPagamento !== 'none' && idPagamento !== '') {
                        console.log('Redirecionando para /formulario200k');
                        window.location.href = '/formulario200k';
                    } else {
                        console.log('Redirecionando para /inscricao200k');
                        window.location.href = '/inscricao200k';
                    }
                } else {
                    localStorage.setItem('login_origin', 'continue');
                    window.location.href = '/login';
                }
            });
    
            updateButtonState();

            // Initialize login controls
            updateLoginControls();
        });
    </script>
</body>
</html>
