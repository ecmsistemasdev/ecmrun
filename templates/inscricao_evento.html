<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="https://ecmrun.com.br/static/img/logo_arealslope.jpeg">
    <link rel="stylesheet" type="text/css" href="/static/css/inscricao_evento.css"/>
    <title>Inscrição - {{ evento.titulo }}</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
</head>
<body>
    <!-- Widget de Valores - Desktop -->
    <div class="valores-widget-desktop" id="valoresWidgetDesktop">
        <div class="widget-title">Valores da Inscrição</div>
        <div class="widget-lote" id="widgetLoteDesktop">Carregando...</div>
        <div class="valor-row">
            <span>Inscrição:</span>
            <span id="widgetValorInscricaoDesktop">R$ 0,00</span>
        </div>
        <div class="valor-row">
            <span>Taxa de Serviço:</span>
            <span id="widgetValorTaxaDesktop">R$ 0,00</span>
        </div>
        <div class="valor-row total">
            <span>Total a Pagar:</span>
            <span id="widgetValorTotalDesktop">R$ 0,00</span>
        </div>
    </div>

    <!-- Widget de Valores - Mobile -->
    <div class="valores-widget-mobile" id="valoresWidgetMobile">
        <div class="widget-content">
            <div class="widget-info">
                <div class="widget-lote" id="widgetLoteMobile">Carregando...</div>
                <div class="widget-title">Inscrição do Evento</div>
                <div class="valor-detalhes">
                    Inscrição: <span id="widgetValorInscricaoMobile">R$ 0,00</span> + 
                    Taxa: <span id="widgetValorTaxaMobile">R$ 0,00</span>
                </div>
            </div>
            <div class="widget-total">
                <div class="total-label">Total</div>
                <div class="total-valor" id="widgetValorTotalMobile">R$ 0,00</div>
            </div>
        </div>
    </div>

    <!-- Timer countdown -->
    <div class="timer-container">
        ⏰ Tempo restante: <span id="timer">15:00</span>
    </div>

    <div class="container">
        <!-- Header com informações do evento -->
        <div class="event-header">
            <h1 class="event-title" id="eventoTitulo">Carregando...</h1>
            <!-- <h1 class="event-title">{{ evento.titulo }} </h1>  -->
            <div class="lote-info" id="loteInfo">Carregando...</div>
        </div>

        <div class="form-container">
            <h2 class="form-title">Dados para Inscrição</h2>
            
            <form id="inscricaoForm" novalidate>
                <!-- CPF -->
                <div class="form-group">
                    <label for="cpf">CPF <span class="required">*</span></label>
                    <input type="text" id="cpf" name="cpf" maxlength="14" inputmode="numeric">
                    <div class="error-message" id="cpfError"></div>
                </div>

                <!-- Email -->
                <div class="form-group">
                    <label for="email">E-mail <span class="required">*</span></label>
                    <input type="email" id="email" name="email">
                    <div class="error-message" id="emailError"></div>
                </div>

                <!-- Nome e Sobrenome -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="nome">Nome <span class="required">*</span></label>
                        <input type="text" id="nome" name="nome" maxlength="25">
                        <div class="error-message" id="nomeError"></div>
                    </div>
                    <div class="form-group">
                        <label for="sobrenome">Sobrenome <span class="required">*</span></label>
                        <input type="text" id="sobrenome" name="sobrenome" maxlength="150">
                        <div class="error-message" id="sobrenomeError"></div>
                    </div>
                </div>
                
                <div class="form-row">
                    <!-- Data de Nascimento -->
                    <div class="form-group">
                        <label for="dataNascimento">Data de Nascimento <span class="required">*</span></label>
                        <input type="text" id="dataNascimento" name="dataNascimento" placeholder="dd/mm/aaaa" inputmode="numeric">
                        <div class="error-message" id="dataNascimentoError"></div>
                    </div>
                    <!-- Celular -->
                    <div class="form-group">
                        <label for="celular">Celular <span class="required">*</span></label>
                        <input type="text" id="celular" name="celular" inputmode="numeric" >
                        <div class="error-message" id="celularError"></div>
                    </div>
                </div>

                <!-- Sexo -->
                <div class="form-group">
                    <label>Sexo <span class="required">*</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="masculino" name="sexo" value="M">
                            <label for="masculino">Masculino</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="feminino" name="sexo" value="F">
                            <label for="feminino">Feminino</label>
                        </div>
                    </div>
                    <div class="error-message" id="sexoError"></div>
                </div>

                <!-- Tamanho da Camiseta -->
                <div class="form-group">
                    <label>Tamanho da Camiseta <span class="required">*</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="camisetaPP" name="camiseta" value="PP">
                            <label for="camisetaPP">PP</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="camisetaP" name="camiseta" value="P">
                            <label for="camisetaP">P</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="camisetaM" name="camiseta" value="M">
                            <label for="camisetaM">M</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="camisetaG" name="camiseta" value="G">
                            <label for="camisetaG">G</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="camisetaGG" name="camiseta" value="GG">
                            <label for="camisetaGG">GG</label>
                        </div>
                    </div>
                    <div class="error-message" id="camisetaError"></div>
                </div>

                <!-- Estado e Cidade -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="estado">Estado <span class="required">*</span></label>
                        <select id="estado" name="estado">
                            <option value="">Selecione um estado</option>
                        </select>
                        <div class="error-message" id="estadoError"></div>
                    </div>
                    <div class="form-group">
                        <label for="cidade">Cidade <span class="required">*</span></label>
                        <select id="cidade" name="cidade" disabled>
                            <option value="">Primeiro selecione um estado</option>
                        </select>
                        <div class="error-message" id="cidadeError"></div>
                    </div>
                </div>

                <!-- Nome Peito -->
                <div class="form-group">
                    <label for="nomepeito">Nome para Nº Peito <span class="optional">(opcional)</span></label>
                    <input type="text" id="nomepeito" name="nomepeito" maxlength="25">
                </div>

                <!-- Equipe -->
                <div class="form-group">
                    <label for="equipe">Equipe de corrida <span class="optional">(opcional)</span></label>
                    <input type="text" id="equipe" name="equipe" maxlength="45">
                </div>

                <div class="form-row">
                    <!-- Telefone de Emergência -->
                    <div class="form-group">
                        <label for="telEmergencia">Telefone de Emergência <span class="optional">(opcional)</span></label>
                        <input type="text" id="telEmergencia" name="telEmergencia"  inputmode="numeric" >
                    </div>
                    <!-- Contato de Emergência -->
                    <div class="form-group">
                        <label for="contEmergencia">Contato de Emergência <span class="optional">(opcional)</span></label>
                        <input type="text" id="contEmergencia" name="contEmergencia" maxlength="45">
                    </div>
                </div>

                <!-- Cupom -->
                <!-- ocultei temporariament no CSS prix a linha 118 do arquivo CSS -->
                <div class="form-group">
                    <label for="cupom" class="cupom-label">Cupom de Desconto</label>
                    <input type="text" id="cupom" name="cupom" maxlength="10">
                </div>

                <!-- Valores da Inscrição -->
                <div class="valores-container" id="valoresContainer">
                    <div class="valores-title">Valores da Inscrição</div>
                    <div class="valor-item">
                        <span>Valor da Inscrição:</span>
                        <span id="valorInscricao">R$ 0,00</span>
                    </div>
                    <div class="valor-item">
                        <span>Taxa de Serviço:</span>
                        <span id="valorTaxa">R$ 0,00</span>
                    </div>
                    <div class="valor-item valor-total">
                        <span>Total a Pagar:</span>
                        <span id="valorTotal">R$ 0,00</span>
                    </div>
                </div>

                <!-- Forma de Pagamento -->
                <div class="form-group">
                    <label>Forma de Pagamento <span class="required">*</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="pix" name="formaPagamento" value="PIX" required>
                            <label for="pix">Pix</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="cartao" name="formaPagamento" value="CARTAO" required>
                            <label for="cartao">Cartão de Crédito</label>
                        </div>
                    </div>
                    <div class="error-message" id="formaPagamentoError"></div>
                </div>

                <!-- Termo de Responsabilidade -->
                <div class="form-group termo-container">
                    <label>Termo de Responsabilidade <span class="required">*</span></label>
                    <div class="termo-texto">
                        Declaro que:
                        <br><br>
                        - Disputo esta prova por minha livre e espontânea vontade, isentando de quaisquer responsabilidades os organizadores e as empresas envolvidas no evento, em meu nome e de meus herdeiros;
                        <br><br>
                        - Estou liberado por meu médico para participar e estou treinado apropriadamente para a prova.
                        <br><br>
                        - Isento os organizadores e as empresas envolvidas no evento, de quaisquer responsabilidades sobre os objetos deixados por mim no guarda-volumes ou locais indicados pela organização do evento;
                        <br><br>
                        - Estou ciente que o valor pago para inscrição não será devolvido em caso de cancelamento ou não participação no evento, bem como não são aceitas substituições/troca de participantes de uma inscrição e que caso meu pedido seja atendido será considerado como exceção;
                        <br><br>
                        - Aceito que as inscrições podem encerrar-se a qualquer momento e para garantir minha inscrição é necessário o pagamento da mesma.
                        <br><br>
                        - É de minha responsabilidade obter todas as informações sobre o evento, tais como: data, local e horário.
                        <br><br>
                        - Autorizo por este meio a utilização por parte do organizador, patrocinadores de qualquer dado, fotografia, filme ou outra gravação contendo imagens de minha participação neste evento em qualquer mídia seja impressa ou eletrônica, incluindo na Internet, para qualquer fim e por tempo indeterminado.
                        <br><br>
                        - Autorizo recebimento de e-mails e/ou SMS da ECMRUN TICKECTS e seus parceiros divulgando informações, notícias e serviços do segmento.
                        <br><br>
                        - Na realização da inscrição para terceiros, tenho a autorização deste participante e que me responsabilizo pela legitimidade de seus dados que estou fornecendo e que o mesmo tem total ciência desta declaração e do REGULAMENTO do evento.
                        <br><br>
                        - Estou totalmente ciente e concordo com o REGULAMENTO do Evento.
                        <br><br>
                        - Declaro que as informações e dados fornecidos são verdadeiros, completos e correspondem à minha real situação. Estou ciente de que fornecer informações falsas ou incompletas poderá acarretar a minha desclassificação da prova, além das sanções legais cabíveis. Assim, assumo total responsabilidade pela veracidade e exatidão dos dados informados, isentando a organização do evento de qualquer responsabilidade decorrente de informações incorretas ou fraudulentas.
                    </div>
                    
                    <div class="termo-aceite">
                        <input type="checkbox" id="termoAceite" name="termoAceite" required>
                        <label for="termoAceite">Eu aceito os termos acima <span class="required">*</span></label>
                    </div>
                    <div class="error-message" id="termoAceiteError"></div>
                </div>

                <div class="btn-container">
                    <button type="submit" class="btn btn-primary" id="btnProximo" disabled>Próximo</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modal de Expiração -->
    <div id="expiredModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">O tempo para a compra expirou</div>
            <div class="modal-text">
                Isso é necessário para que uma reserva não fique presa e possa estar disponível para compra novamente.<br><br>
                Você pode recomeçar a compra clicando no botão abaixo.
            </div>
            <button type="button" class="btn btn-primary" onclick="voltarPaginaAnterior()">Voltar</button>
        </div>
    </div>

    <!-- Modal de Data Inválida -->
    <div id="dataInvalidaModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Data Inválida</div>
            <div class="modal-text">
                Por favor, insira uma data de nascimento válida no formato dd/mm/aaaa.
            </div>
            <button type="button" class="btn btn-primary" onclick="fecharModal('dataInvalidaModal')">OK</button>
        </div>
    </div>

    <!-- Modal de Alerta Genérico -->
    <div id="alertModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Atenção</div>
            <div class="modal-text" id="alertModalText">
                Mensagem de alerta
            </div>
            <button type="button" class="btn btn-primary" onclick="fecharModal('alertModal')">OK</button>
        </div>
    </div>

    <!-- Modal de Loading CPF -->
    <div id="loadingCpfModal" class="loading-modal">
        <div class="loading-modal-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Buscando Dados...</div>
        </div>
    </div>

    <!-- Modal de Loading Pagamento -->
    <div id="loadingPagamentoModal" class="loading-modal">
        <div class="loading-modal-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Aguarde, direcionando para área de pagamento...</div>
        </div>
    </div>

    <!-- Modal de Campo Obrigatório -->
    <div id="campoObrigatorioModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Campo Obrigatório</div>
            <div class="modal-text" id="campoObrigatorioText">
                Mensagem do campo obrigatório
            </div>
            <button type="button" class="btn btn-primary" onclick="fecharModalEFocar()">OK</button>
        </div>
    </div>    

    <script src="/static/js/inscricao_evento.js"></script>
</body>
</html>