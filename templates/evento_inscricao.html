<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="https://ecmrun.com.br/static/img/logo_arealslope.jpeg">
    <link rel="stylesheet" type="text/css" href="/static/css/inscricao_evento.css"/>
    <title>Inscri√ß√£o - {{ evento.titulo }}</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.16/jquery.mask.min.js"></script>
</head>
<body>
    <!-- Widget de Valores - Desktop -->
    <div class="valores-widget-desktop" id="valoresWidgetDesktop">
        <div class="widget-title">Valores da Inscri√ß√£o</div>
        <div class="widget-lote" id="widgetLoteDesktop">Carregando...</div>
        <div class="valor-row">
            <span>Inscri√ß√£o:</span>
            <span id="widgetValorInscricaoDesktop">R$ 0,00</span>
        </div>
        <div class="valor-row">
            <span>Taxa de Servi√ßo:</span>
            <span id="widgetValorTaxaDesktop">R$ 0,00</span>
        </div>
        <div class="valor-row total">
            <span>Total a Pagar:</span>
            <span id="widgetValorTotalDesktop">R$ 0,00</span>
        </div>
    </div>

    <!-- Widget de Valores - Mobile -->
    <div class="valores-widget-mobile" id="valoresWidgetMobile">
        <div class="widget-content">
            <div class="widget-info">
                <div class="widget-lote" id="widgetLoteMobile">Carregando...</div>
                <div class="widget-title">Inscri√ß√£o do Evento</div>
                <div class="valor-detalhes">
                    Inscri√ß√£o: <span id="widgetValorInscricaoMobile">R$ 0,00</span> + 
                    Taxa: <span id="widgetValorTaxaMobile">R$ 0,00</span>
                </div>
            </div>
            <div class="widget-total">
                <div class="total-label">Total</div>
                <div class="total-valor" id="widgetValorTotalMobile">R$ 0,00</div>
            </div>
        </div>
    </div>

    <!-- Timer countdown -->
    <div class="timer-container">
        ‚è∞ Tempo restante: <span id="timer">15:00</span>
    </div>

    <div class="container">
        <!-- Header com informa√ß√µes do evento -->
        <div class="event-header">
            <h1 class="event-title" id="eventoTitulo">{{ evento.titulo }}</h1>
            <div class="lote-info" id="loteInfo">Carregando...</div>
        </div>

        <div class="form-container">
            <h2 class="form-title">Dados para Inscri√ß√£o</h2>
            
            <form id="inscricaoForm" novalidate>
                <!-- CPF -->
                <div class="form-group">
                    <label for="cpf">CPF <span class="required">*</span></label>
                    <input type="text" id="cpf" name="cpf" maxlength="14" inputmode="numeric">
                    <div class="error-message" id="cpfError"></div>
                </div>

                <!-- Email -->
                <div class="form-group">
                    <label for="email">E-mail <span class="required">*</span></label>
                    <input type="email" id="email" name="email">
                    <div class="error-message" id="emailError"></div>
                </div>

                <!-- Nome e Sobrenome -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="nome">Nome <span class="required">*</span></label>
                        <input type="text" id="nome" name="nome" maxlength="25">
                        <div class="error-message" id="nomeError"></div>
                    </div>
                    <div class="form-group">
                        <label for="sobrenome">Sobrenome <span class="required">*</span></label>
                        <input type="text" id="sobrenome" name="sobrenome" maxlength="150">
                        <div class="error-message" id="sobrenomeError"></div>
                    </div>
                </div>
                
                <div class="form-row">
                    <!-- Data de Nascimento -->
                    <div class="form-group">
                        <label for="dataNascimento">Data de Nascimento <span class="required">*</span></label>
                        <input type="text" id="dataNascimento" name="dataNascimento" placeholder="dd/mm/aaaa" inputmode="numeric">
                        <div class="error-message" id="dataNascimentoError"></div>
                    </div>
                    <!-- Celular -->
                    <div class="form-group">
                        <label for="celular">Celular <span class="required">*</span></label>
                        <input type="text" id="celular" name="celular" inputmode="numeric" >
                        <div class="error-message" id="celularError"></div>
                    </div>
                </div>

                <!-- Sexo -->
                <div class="form-group">
                    <label>Sexo <span class="required">*</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="masculino" name="sexo" value="M">
                            <label for="masculino">Masculino</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="feminino" name="sexo" value="F">
                            <label for="feminino">Feminino</label>
                        </div>
                    </div>
                    <div class="error-message" id="sexoError"></div>
                </div>

                <!-- Tamanho da Camiseta -->
                <div class="form-group">
                    <label>Tamanho da Camiseta <span class="required">*</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="camisetaPP" name="camiseta" value="PP">
                            <label for="camisetaPP">PP</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="camisetaP" name="camiseta" value="P">
                            <label for="camisetaP">P</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="camisetaM" name="camiseta" value="M">
                            <label for="camisetaM">M</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="camisetaG" name="camiseta" value="G">
                            <label for="camisetaG">G</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="camisetaGG" name="camiseta" value="GG">
                            <label for="camisetaGG">GG</label>
                        </div>
                    </div>
                    <div class="error-message" id="camisetaError"></div>
                </div>

                <!-- Estado e Cidade -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="estado">Estado <span class="required">*</span></label>
                        <select id="estado" name="estado">
                            <option value="">Selecione um estado</option>
                        </select>
                        <div class="error-message" id="estadoError"></div>
                    </div>
                    <div class="form-group">
                        <label for="cidade">Cidade <span class="required">*</span></label>
                        <select id="cidade" name="cidade" disabled>
                            <option value="">Primeiro selecione um estado</option>
                        </select>
                        <div class="error-message" id="cidadeError"></div>
                    </div>
                </div>

                <!-- Nome Peito -->
                <div class="form-group">
                    <label for="nomepeito">Nome para N¬∫ Peito <span class="optional">(opcional)</span></label>
                    <input type="text" id="nomepeito" name="nomepeito" maxlength="25">
                </div>

                <!-- Equipe -->
                <div class="form-group">
                    <label for="equipe">Equipe de corrida <span class="optional">(opcional)</span></label>
                    <input type="text" id="equipe" name="equipe" maxlength="45">
                </div>

                <div class="form-row">
                    <!-- Telefone de Emerg√™ncia -->
                    <div class="form-group">
                        <label for="telEmergencia">Telefone de Emerg√™ncia <span class="optional">(opcional)</span></label>
                        <input type="text" id="telEmergencia" name="telEmergencia"  inputmode="numeric" >
                    </div>
                    <!-- Contato de Emerg√™ncia -->
                    <div class="form-group">
                        <label for="contEmergencia">Contato de Emerg√™ncia <span class="optional">(opcional)</span></label>
                        <input type="text" id="contEmergencia" name="contEmergencia" maxlength="45">
                    </div>
                </div>

                <!-- Cupom -->
                <div class="form-group">
                    <label for="cupom" class="cupom-label">Cupom de Desconto</label>
                    <input type="text" id="cupom" name="cupom" maxlength="10">
                </div>

                <!-- Valores da Inscri√ß√£o -->
                <div class="valores-container" id="valoresContainer">
                    <div class="valores-title">Valores da Inscri√ß√£o</div>
                    <div class="valor-item">
                        <span>Valor da Inscri√ß√£o:</span>
                        <span id="valorInscricao">R$ 0,00</span>
                    </div>
                    <div class="valor-item">
                        <span>Taxa de Servi√ßo:</span>
                        <span id="valorTaxa">R$ 0,00</span>
                    </div>
                    <div class="valor-item valor-total">
                        <span>Total a Pagar:</span>
                        <span id="valorTotal">R$ 0,00</span>
                    </div>
                </div>

                <!-- Forma de Pagamento -->
                <div class="form-group">
                    <label>Forma de Pagamento <span class="required">*</span></label>
                    <div class="checkbox-group">
                        <div class="checkbox-item">
                            <input type="radio" id="pix" name="formaPagamento" value="PIX" required>
                            <label for="pix">Pix</label>
                        </div>
                        <div class="checkbox-item">
                            <input type="radio" id="cartao" name="formaPagamento" value="CARTAO" required>
                            <label for="cartao">Cart√£o de Cr√©dito</label>
                        </div>
                    </div>
                    <div class="error-message" id="formaPagamentoError"></div>
                </div>

                <!-- Endere√ßo para Boleto (inicialmente oculto)
                <div class="endereco-boleto-container" id="enderecoBoletoContainer" style="display: none;">
                    <h3 style="margin: 20px 0 15px 0; color: #2c3e50; font-size: 1.2em;">üè† Endere√ßo para Boleto</h3>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="cep">CEP <span class="required">*</span></label>
                            <input type="text" id="cep" name="cep" maxlength="10" inputmode="numeric">
                            <div class="error-message" id="cepError"></div>
                        </div>
                        <div class="form-group">
                            <label for="numeroEnd">N√∫mero <span class="required">*</span></label>
                            <input type="text" id="numeroEnd" name="numeroEnd" maxlength="10">
                            <div class="error-message" id="numeroEndError"></div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="ruaEnd">Rua <span class="required">*</span></label>
                        <input type="text" id="ruaEnd" name="ruaEnd" readonly style="background-color: #f8f9fa;">
                        <div class="error-message" id="ruaEndError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="bairroEnd">Bairro <span class="required">*</span></label>
                        <input type="text" id="bairroEnd" name="bairroEnd" readonly style="background-color: #f8f9fa;">
                        <div class="error-message" id="bairroEndError"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="complementoEnd">Complemento <span class="optional">(opcional)</span></label>
                        <input type="text" id="complementoEnd" name="complementoEnd" maxlength="100">
                    </div>
                </div> -->

                <!-- Termo de Responsabilidade -->
                <div class="form-group termo-container">
                    <label>Termo de Responsabilidade <span class="required">*</span></label>
                    <div class="termo-texto">
                        Declaro que:
                        <br><br>
                        - Disputo esta prova por minha livre e espont√¢nea vontade, isentando de quaisquer responsabilidades os organizadores e as empresas envolvidas no evento, em meu nome e de meus herdeiros;
                        <br><br>
                        - Estou liberado por meu m√©dico para participar e estou treinado apropriadamente para a prova.
                        <br><br>
                        - Isento os organizadores e as empresas envolvidas no evento, de quaisquer responsabilidades sobre os objetos deixados por mim no guarda-volumes ou locais indicados pela organiza√ß√£o do evento;
                        <br><br>
                        - Estou ciente que o valor pago para inscri√ß√£o n√£o ser√° devolvido em caso de cancelamento ou n√£o participa√ß√£o no evento, bem como n√£o s√£o aceitas substitui√ß√µes/troca de participantes de uma inscri√ß√£o e que caso meu pedido seja atendido ser√° considerado como exce√ß√£o;
                        <br><br>
                        - Aceito que as inscri√ß√µes podem encerrar-se a qualquer momento e para garantir minha inscri√ß√£o √© necess√°rio o pagamento da mesma.
                        <br><br>
                        - √â de minha responsabilidade obter todas as informa√ß√µes sobre o evento, tais como: data, local e hor√°rio.
                        <br><br>
                        - Autorizo por este meio a utiliza√ß√£o por parte do organizador, patrocinadores de qualquer dado, fotografia, filme ou outra grava√ß√£o contendo imagens de minha participa√ß√£o neste evento em qualquer m√≠dia seja impressa ou eletr√¥nica, incluindo na Internet, para qualquer fim e por tempo indeterminado.
                        <br><br>
                        - Autorizo recebimento de e-mails e/ou SMS da ECMRUN TICKECTS e seus parceiros divulgando informa√ß√µes, not√≠cias e servi√ßos do segmento.
                        <br><br>
                        - Na realiza√ß√£o da inscri√ß√£o para terceiros, tenho a autoriza√ß√£o deste participante e que me responsabilizo pela legitimidade de seus dados que estou fornecendo e que o mesmo tem total ci√™ncia desta declara√ß√£o e do REGULAMENTO do evento.
                        <br><br>
                        - Estou totalmente ciente e concordo com o REGULAMENTO do Evento.
                        <br><br>
                        - Declaro que as informa√ß√µes e dados fornecidos s√£o verdadeiros, completos e correspondem √† minha real situa√ß√£o. Estou ciente de que fornecer informa√ß√µes falsas ou incompletas poder√° acarretar a minha desclassifica√ß√£o da prova, al√©m das san√ß√µes legais cab√≠veis. Assim, assumo total responsabilidade pela veracidade e exatid√£o dos dados informados, isentando a organiza√ß√£o do evento de qualquer responsabilidade decorrente de informa√ß√µes incorretas ou fraudulentas.
                    </div>
                    
                    <div class="termo-aceite">
                        <input type="checkbox" id="termoAceite" name="termoAceite" required>
                        <label for="termoAceite">Eu aceito os termos acima <span class="required">*</span></label>
                    </div>
                    <div class="error-message" id="termoAceiteError"></div>
                </div>

                <div class="btn-container">
                    <button type="submit" class="btn btn-primary" id="btnProximo" disabled>Pr√≥ximo</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Modals existentes... -->
    <div id="expiredModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">O tempo para a compra expirou</div>
            <div class="modal-text">
                Isso √© necess√°rio para que uma reserva n√£o fique presa e possa estar dispon√≠vel para compra novamente.<br><br>
                Voc√™ pode recome√ßar a compra clicando no bot√£o abaixo.
            </div>
            <button type="button" class="btn btn-primary" onclick="voltarPaginaAnterior()">Voltar</button>
        </div>
    </div>

    <div id="dataInvalidaModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Data Inv√°lida</div>
            <div class="modal-text">
                Por favor, insira uma data de nascimento v√°lida no formato dd/mm/aaaa.
            </div>
            <button type="button" class="btn btn-primary" onclick="fecharModal('dataInvalidaModal')">OK</button>
        </div>
    </div>

    <div id="alertModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Aten√ß√£o</div>
            <div class="modal-text" id="alertModalText">
                Mensagem de alerta
            </div>
            <button type="button" class="btn btn-primary" onclick="fecharModal('alertModal')">OK</button>
        </div>
    </div>

    <div id="loadingCpfModal" class="loading-modal">
        <div class="loading-modal-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Buscando Dados...</div>
        </div>
    </div>

    <div id="loadingPagamentoModal" class="loading-modal">
        <div class="loading-modal-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Aguarde, direcionando para √°rea de pagamento...</div>
        </div>
    </div>

    <div id="campoObrigatorioModal" class="modal">
        <div class="modal-content">
            <div class="modal-title">Campo Obrigat√≥rio</div>
            <div class="modal-text" id="campoObrigatorioText">
                Mensagem do campo obrigat√≥rio
            </div>
            <button type="button" class="btn btn-primary" onclick="fecharModalEFocar()">OK</button>
        </div>
    </div>    

    <script src="/static/js/evento_inscricao.js"></script>
</body>
</html>